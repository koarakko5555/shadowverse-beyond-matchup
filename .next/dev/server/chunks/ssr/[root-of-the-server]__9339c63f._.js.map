{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///Users/k-hosaka/Project/private-dev/shadowverse-beyond-matchup/app/lib/auth.ts"],"sourcesContent":["const INTERNAL_EMAIL_DOMAIN = \"gmail.com\";\n\nexport const idToEmail = (id: string) => {\n  const normalized = id.trim().toLowerCase();\n  return `${normalized}@${INTERNAL_EMAIL_DOMAIN}`;\n};\n"],"names":[],"mappings":";;;;AAAA,MAAM,wBAAwB;AAEvB,MAAM,YAAY,CAAC;IACxB,MAAM,aAAa,GAAG,IAAI,GAAG,WAAW;IACxC,OAAO,GAAG,WAAW,CAAC,EAAE,uBAAuB;AACjD"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///Users/k-hosaka/Project/private-dev/shadowverse-beyond-matchup/app/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\";\n\nexport const createSupabaseBrowserClient = () =>\n  createBrowserClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL ?? \"\",\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY ?? \"\"\n  );\n"],"names":[],"mappings":";;;;;;;;;;AAEO,MAAM,8BAA8B,IACzC,oBACE,gFAAwC,IACxC,sFAA6C"}},
    {"offset": {"line": 56, "column": 0}, "map": {"version":3,"sources":["file:///Users/k-hosaka/Project/private-dev/shadowverse-beyond-matchup/app/%28auth%29/signup/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { useState, useTransition } from \"react\";\n\nimport { idToEmail } from \"@/app/lib/auth\";\nimport { createSupabaseBrowserClient } from \"@/app/lib/supabase/client\";\n\nexport default function SignupPage() {\n  const router = useRouter();\n  const [isPending, startTransition] = useTransition();\n  const [loginId, setLoginId] = useState(\"\");\n  const [name, setName] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setError(null);\n\n    if (!loginId.trim() || !name.trim() || !password) {\n      setError(\"ID・表示名・パスワードを入力してください。\");\n      return;\n    }\n    if (password.length < 6) {\n      setError(\"パスワードは6文字以上で入力してください。\");\n      return;\n    }\n\n    const supabase = createSupabaseBrowserClient();\n    const { data, error: signUpError } = await supabase.auth.signUp({\n      email: idToEmail(loginId),\n      password,\n    });\n\n    if (signUpError) {\n      setError(signUpError.message || \"登録に失敗しました。\");\n      return;\n    }\n\n    if (data.session) {\n      await fetch(\"/api/auth/profile\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ name: name.trim() }),\n      });\n      startTransition(() => router.push(\"/packs\"));\n      return;\n    }\n\n    setError(\"登録完了メールを確認してください。\");\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <p className=\"text-xs font-semibold uppercase tracking-[0.3em] text-zinc-400\">\n          Signup\n        </p>\n        <h1 className=\"mt-2 text-2xl font-semibold text-zinc-900\">\n          新規登録\n        </h1>\n      </div>\n\n      <form className=\"space-y-4\" onSubmit={onSubmit}>\n        <label className=\"flex flex-col gap-2 text-sm text-zinc-700\">\n          ID\n          <input\n            className=\"rounded-lg border border-zinc-200 px-3 py-2 text-sm text-zinc-900 focus:border-zinc-400 focus:outline-none\"\n            value={loginId}\n            onChange={(event) => setLoginId(event.target.value)}\n            placeholder=\"例: torieru\"\n          />\n        </label>\n        <label className=\"flex flex-col gap-2 text-sm text-zinc-700\">\n          表示名\n          <input\n            className=\"rounded-lg border border-zinc-200 px-3 py-2 text-sm text-zinc-900 focus:border-zinc-400 focus:outline-none\"\n            value={name}\n            onChange={(event) => setName(event.target.value)}\n            placeholder=\"例: とりえる\"\n          />\n        </label>\n        <label className=\"flex flex-col gap-2 text-sm text-zinc-700\">\n          パスワード\n          <input\n            className=\"rounded-lg border border-zinc-200 px-3 py-2 text-sm text-zinc-900 focus:border-zinc-400 focus:outline-none\"\n            type=\"password\"\n            value={password}\n            onChange={(event) => setPassword(event.target.value)}\n          />\n        </label>\n        {error && <p className=\"text-sm text-red-600\">{error}</p>}\n        <button\n          className=\"w-full rounded-lg bg-zinc-900 px-4 py-2 text-sm font-semibold text-white hover:bg-zinc-800 disabled:cursor-not-allowed disabled:bg-zinc-400\"\n          type=\"submit\"\n          disabled={isPending}\n        >\n          登録する\n        </button>\n      </form>\n\n      <div className=\"text-sm text-zinc-500\">\n        既にアカウントがある場合は{\" \"}\n        <Link className=\"font-semibold text-zinc-900\" href=\"/login\">\n          ログイン\n        </Link>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAEA;AACA;AAPA;;;;;;;AASe,SAAS;IACtB,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,sNAAa;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,MAAM,WAAW,OAAO;QACtB,MAAM,cAAc;QACpB,SAAS;QAET,IAAI,CAAC,QAAQ,IAAI,MAAM,CAAC,KAAK,IAAI,MAAM,CAAC,UAAU;YAChD,SAAS;YACT;QACF;QACA,IAAI,SAAS,MAAM,GAAG,GAAG;YACvB,SAAS;YACT;QACF;QAEA,MAAM,WAAW,IAAA,+JAA2B;QAC5C,MAAM,EAAE,IAAI,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,MAAM,CAAC;YAC9D,OAAO,IAAA,+HAAS,EAAC;YACjB;QACF;QAEA,IAAI,aAAa;YACf,SAAS,YAAY,OAAO,IAAI;YAChC;QACF;QAEA,IAAI,KAAK,OAAO,EAAE;YAChB,MAAM,MAAM,qBAAqB;gBAC/B,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,MAAM,KAAK,IAAI;gBAAG;YAC3C;YACA,gBAAgB,IAAM,OAAO,IAAI,CAAC;YAClC;QACF;QAEA,SAAS;IACX;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAE,WAAU;kCAAiE;;;;;;kCAG9E,8OAAC;wBAAG,WAAU;kCAA4C;;;;;;;;;;;;0BAK5D,8OAAC;gBAAK,WAAU;gBAAY,UAAU;;kCACpC,8OAAC;wBAAM,WAAU;;4BAA4C;0CAE3D,8OAAC;gCACC,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,QAAU,WAAW,MAAM,MAAM,CAAC,KAAK;gCAClD,aAAY;;;;;;;;;;;;kCAGhB,8OAAC;wBAAM,WAAU;;4BAA4C;0CAE3D,8OAAC;gCACC,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,QAAU,QAAQ,MAAM,MAAM,CAAC,KAAK;gCAC/C,aAAY;;;;;;;;;;;;kCAGhB,8OAAC;wBAAM,WAAU;;4BAA4C;0CAE3D,8OAAC;gCACC,WAAU;gCACV,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,QAAU,YAAY,MAAM,MAAM,CAAC,KAAK;;;;;;;;;;;;oBAGtD,uBAAS,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;kCAC/C,8OAAC;wBACC,WAAU;wBACV,MAAK;wBACL,UAAU;kCACX;;;;;;;;;;;;0BAKH,8OAAC;gBAAI,WAAU;;oBAAwB;oBACvB;kCACd,8OAAC,uKAAI;wBAAC,WAAU;wBAA8B,MAAK;kCAAS;;;;;;;;;;;;;;;;;;AAMpE"}}]
}