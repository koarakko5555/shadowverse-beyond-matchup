{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/k-hosaka/Project/private-dev/shadowverse-beyond-matchup/app/components/SettingsProfileForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useTransition } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\ntype Props = {\n  initialName: string;\n};\n\nexport default function SettingsProfileForm({ initialName }: Props) {\n  const router = useRouter();\n  const [name, setName] = useState(initialName);\n  const [error, setError] = useState<string | null>(null);\n  const [message, setMessage] = useState<string | null>(null);\n  const [isPending, startTransition] = useTransition();\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setError(null);\n    setMessage(null);\n\n    const trimmed = name.trim();\n    if (!trimmed || trimmed.length > 50) {\n      setError(\"表示名は1〜50文字で入力してください。\");\n      return;\n    }\n\n    const res = await fetch(\"/api/settings/profile\", {\n      method: \"PATCH\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ name: trimmed }),\n    });\n\n    if (!res.ok) {\n      const data = await res.json().catch(() => ({}));\n      setError(data?.error ?? \"更新に失敗しました。\");\n      return;\n    }\n\n    setMessage(\"表示名を更新しました。\");\n    startTransition(() => router.refresh());\n  };\n\n  return (\n    <section className=\"rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm\">\n      <div>\n        <p className=\"text-xs font-semibold uppercase tracking-[0.3em] text-zinc-400\">\n          Settings\n        </p>\n        <h2 className=\"mt-2 text-2xl font-semibold text-zinc-900\">\n          表示名の変更\n        </h2>\n      </div>\n\n      <form className=\"mt-6 grid gap-4\" onSubmit={onSubmit}>\n        <label className=\"flex flex-col gap-2 text-sm text-zinc-700\">\n          表示名\n          <input\n            className=\"rounded-lg border border-zinc-200 px-3 py-2 text-sm text-zinc-900 focus:border-zinc-400 focus:outline-none\"\n            value={name}\n            onChange={(event) => setName(event.target.value)}\n            placeholder=\"表示名を入力\"\n          />\n        </label>\n        <div className=\"flex flex-col gap-3 sm:flex-row sm:items-center\">\n          <button\n            className=\"w-full rounded-lg bg-zinc-900 px-4 py-2 text-sm font-semibold text-white hover:bg-zinc-800 disabled:cursor-not-allowed disabled:bg-zinc-400 sm:w-auto sm:min-w-[160px]\"\n            type=\"submit\"\n            disabled={isPending}\n          >\n            変更する\n          </button>\n          {message && <span className=\"text-sm text-emerald-600\">{message}</span>}\n        </div>\n      </form>\n\n      {error && <p className=\"mt-3 text-sm text-red-600\">{error}</p>}\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AASe,SAAS,oBAAoB,EAAE,WAAW,EAAS;IAChE,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAgB;IACtD,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,sNAAa;IAElD,MAAM,WAAW,OAAO;QACtB,MAAM,cAAc;QACpB,SAAS;QACT,WAAW;QAEX,MAAM,UAAU,KAAK,IAAI;QACzB,IAAI,CAAC,WAAW,QAAQ,MAAM,GAAG,IAAI;YACnC,SAAS;YACT;QACF;QAEA,MAAM,MAAM,MAAM,MAAM,yBAAyB;YAC/C,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE,MAAM;YAAQ;QACvC;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YAC7C,SAAS,MAAM,SAAS;YACxB;QACF;QAEA,WAAW;QACX,gBAAgB,IAAM,OAAO,OAAO;IACtC;IAEA,qBACE,8OAAC;QAAQ,WAAU;;0BACjB,8OAAC;;kCACC,8OAAC;wBAAE,WAAU;kCAAiE;;;;;;kCAG9E,8OAAC;wBAAG,WAAU;kCAA4C;;;;;;;;;;;;0BAK5D,8OAAC;gBAAK,WAAU;gBAAkB,UAAU;;kCAC1C,8OAAC;wBAAM,WAAU;;4BAA4C;0CAE3D,8OAAC;gCACC,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,QAAU,QAAQ,MAAM,MAAM,CAAC,KAAK;gCAC/C,aAAY;;;;;;;;;;;;kCAGhB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,WAAU;gCACV,MAAK;gCACL,UAAU;0CACX;;;;;;4BAGA,yBAAW,8OAAC;gCAAK,WAAU;0CAA4B;;;;;;;;;;;;;;;;;;YAI3D,uBAAS,8OAAC;gBAAE,WAAU;0BAA6B;;;;;;;;;;;;AAG1D"}}]
}