{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/k-hosaka/Project/private-dev/shadowverse-beyond-matchup/app/components/UserManager.tsx"],"sourcesContent":["\"use client\";\n\nimport { useRouter } from \"next/navigation\";\nimport { useState, useTransition } from \"react\";\n\ntype User = {\n  id: number;\n  name: string;\n};\n\ntype Props = {\n  users: User[];\n};\n\nexport default function UserManager({ users }: Props) {\n  const router = useRouter();\n  const [isPending, startTransition] = useTransition();\n  const [name, setName] = useState(\"\");\n  const [error, setError] = useState<string | null>(null);\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setError(null);\n\n    if (name.trim().length < 1 || name.trim().length > 100) {\n      setError(\"ユーザー名は1〜100文字で入力してください。\");\n      return;\n    }\n\n    const res = await fetch(\"/api/users\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ name: name.trim() }),\n    });\n\n    if (!res.ok) {\n      const data = await res.json().catch(() => ({}));\n      setError(data?.error ?? \"登録に失敗しました。\");\n      return;\n    }\n\n    setName(\"\");\n    startTransition(() => router.refresh());\n  };\n\n  const onDelete = async (id: number) => {\n    setError(null);\n    const res = await fetch(`/api/users/${id}`, {\n      method: \"DELETE\",\n    });\n\n    if (!res.ok) {\n      const data = await res.json().catch(() => ({}));\n      setError(data?.error ?? \"削除に失敗しました。\");\n      return;\n    }\n\n    startTransition(() => router.refresh());\n  };\n\n  return (\n    <section className=\"rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm\">\n      <div>\n        <p className=\"text-xs font-semibold uppercase tracking-[0.3em] text-zinc-400\">\n          Users\n        </p>\n        <h2 className=\"mt-2 text-2xl font-semibold text-zinc-900\">\n          ユーザー管理\n        </h2>\n      </div>\n\n      <form className=\"mt-6 grid gap-4 md:grid-cols-3\" onSubmit={onSubmit}>\n        <label className=\"flex flex-col gap-2 text-sm text-zinc-700 md:col-span-2\">\n          ユーザー名\n          <input\n            className=\"rounded-lg border border-zinc-200 px-3 py-2 text-sm text-zinc-900 focus:border-zinc-400 focus:outline-none\"\n            value={name}\n            onChange={(event) => setName(event.target.value)}\n            placeholder=\"例: hosaka\"\n          />\n        </label>\n        <div className=\"flex items-end\">\n          <button\n            className=\"w-full rounded-lg bg-zinc-900 px-4 py-2 text-sm font-semibold text-white hover:bg-zinc-800 disabled:cursor-not-allowed disabled:bg-zinc-400\"\n            type=\"submit\"\n            disabled={isPending}\n          >\n            追加する\n          </button>\n        </div>\n      </form>\n      {error && <p className=\"mt-3 text-sm text-red-600\">{error}</p>}\n\n      <div className=\"mt-6 space-y-3\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold text-zinc-900\">登録済みユーザー</h3>\n          <span className=\"text-sm text-zinc-500\">{users.length}件</span>\n        </div>\n        {users.length === 0 && (\n          <p className=\"text-sm text-zinc-500\">まだ登録がありません。</p>\n        )}\n        {users.map((user) => (\n          <div\n            key={user.id}\n            className=\"flex items-center justify-between rounded-lg border border-zinc-100 bg-zinc-50 px-4 py-3\"\n          >\n            <p className=\"text-sm font-semibold text-zinc-900\">{user.name}</p>\n            <button\n              className=\"text-sm font-semibold text-red-600 hover:text-red-700\"\n              onClick={() => onDelete(user.id)}\n              type=\"button\"\n            >\n              削除\n            </button>\n          </div>\n        ))}\n      </div>\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAce,SAAS,YAAY,EAAE,KAAK,EAAS;;IAClD,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,CAAC,WAAW,gBAAgB,GAAG,IAAA,8KAAa;IAClD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAC;IACjC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAElD,MAAM,WAAW,OAAO;QACtB,MAAM,cAAc;QACpB,SAAS;QAET,IAAI,KAAK,IAAI,GAAG,MAAM,GAAG,KAAK,KAAK,IAAI,GAAG,MAAM,GAAG,KAAK;YACtD,SAAS;YACT;QACF;QAEA,MAAM,MAAM,MAAM,MAAM,cAAc;YACpC,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE,MAAM,KAAK,IAAI;YAAG;QAC3C;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YAC7C,SAAS,MAAM,SAAS;YACxB;QACF;QAEA,QAAQ;QACR,gBAAgB,IAAM,OAAO,OAAO;IACtC;IAEA,MAAM,WAAW,OAAO;QACtB,SAAS;QACT,MAAM,MAAM,MAAM,MAAM,CAAC,WAAW,EAAE,IAAI,EAAE;YAC1C,QAAQ;QACV;QAEA,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;YAC7C,SAAS,MAAM,SAAS;YACxB;QACF;QAEA,gBAAgB,IAAM,OAAO,OAAO;IACtC;IAEA,qBACE,6LAAC;QAAQ,WAAU;;0BACjB,6LAAC;;kCACC,6LAAC;wBAAE,WAAU;kCAAiE;;;;;;kCAG9E,6LAAC;wBAAG,WAAU;kCAA4C;;;;;;;;;;;;0BAK5D,6LAAC;gBAAK,WAAU;gBAAiC,UAAU;;kCACzD,6LAAC;wBAAM,WAAU;;4BAA0D;0CAEzE,6LAAC;gCACC,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,QAAU,QAAQ,MAAM,MAAM,CAAC,KAAK;gCAC/C,aAAY;;;;;;;;;;;;kCAGhB,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BACC,WAAU;4BACV,MAAK;4BACL,UAAU;sCACX;;;;;;;;;;;;;;;;;YAKJ,uBAAS,6LAAC;gBAAE,WAAU;0BAA6B;;;;;;0BAEpD,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,6LAAC;gCAAK,WAAU;;oCAAyB,MAAM,MAAM;oCAAC;;;;;;;;;;;;;oBAEvD,MAAM,MAAM,KAAK,mBAChB,6LAAC;wBAAE,WAAU;kCAAwB;;;;;;oBAEtC,MAAM,GAAG,CAAC,CAAC,qBACV,6LAAC;4BAEC,WAAU;;8CAEV,6LAAC;oCAAE,WAAU;8CAAuC,KAAK,IAAI;;;;;;8CAC7D,6LAAC;oCACC,WAAU;oCACV,SAAS,IAAM,SAAS,KAAK,EAAE;oCAC/B,MAAK;8CACN;;;;;;;2BARI,KAAK,EAAE;;;;;;;;;;;;;;;;;AAgBxB;GAzGwB;;QACP,kJAAS;QACa,8KAAa;;;KAF5B"}}]
}