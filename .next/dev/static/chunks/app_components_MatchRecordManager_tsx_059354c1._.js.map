{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/k-hosaka/Project/private-dev/shadowverse-beyond-matchup/app/components/MatchRecordManager.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState, useTransition } from \"react\";\nimport { useRouter } from \"next/navigation\";\n\ntype CardPack = {\n  id: number;\n  name: string;\n  releaseDate: string;\n};\n\ntype Deck = {\n  id: number;\n  name: string;\n  deckClass: string;\n  cardPack: CardPack;\n};\n\ntype User = {\n  id: number;\n  name: string;\n};\n\ntype MatchRecord = {\n  id: number;\n  deck: Deck;\n  opponentDeck: Deck;\n  user: User;\n  turn: \"FIRST\" | \"SECOND\";\n  result: \"WIN\" | \"LOSS\";\n  note: string;\n  createdAt: string;\n};\n\ntype Props = {\n  decks: Deck[];\n  records: MatchRecord[];\n};\n\nconst deckClassLabels: Record<string, string> = {\n  ELF: \"エルフ\",\n  ROYAL: \"ロイヤル\",\n  WITCH: \"ウィッチ\",\n  NIGHTMARE: \"ナイトメア\",\n  DRAGON: \"ドラゴン\",\n  BISHOP: \"ビショップ\",\n  NEMESIS: \"ネメシス\",\n};\n\nconst turnLabels: Record<MatchRecord[\"turn\"], string> = {\n  FIRST: \"先攻\",\n  SECOND: \"後攻\",\n};\n\nconst resultLabels: Record<MatchRecord[\"result\"], string> = {\n  WIN: \"勝ち\",\n  LOSS: \"負け\",\n};\n\ntype DeckStats = {\n  deckId: number;\n  name: string;\n  deckClass: string;\n  cardPack: string;\n  total: number;\n  wins: number;\n  firstTotal: number;\n  firstWins: number;\n  secondTotal: number;\n  secondWins: number;\n};\n\nconst formatRate = (value: number | null) =>\n  value === null ? \"-\" : Number.isInteger(value) ? `${value}` : value.toFixed(1);\n\nconst buildDeckStats = (decks: Deck[], records: MatchRecord[]) => {\n  const byDeck = new Map<number, DeckStats>();\n\n  for (const deck of decks) {\n    byDeck.set(deck.id, {\n      deckId: deck.id,\n      name: deck.name,\n      deckClass: deck.deckClass,\n      cardPack: deck.cardPack.name,\n      total: 0,\n      wins: 0,\n      firstTotal: 0,\n      firstWins: 0,\n      secondTotal: 0,\n      secondWins: 0,\n    });\n  }\n\n  for (const record of records) {\n    const entry = byDeck.get(record.deck.id);\n    if (!entry) continue;\n    entry.total += 1;\n    if (record.result === \"WIN\") entry.wins += 1;\n    if (record.turn === \"FIRST\") {\n      entry.firstTotal += 1;\n      if (record.result === \"WIN\") entry.firstWins += 1;\n    } else {\n      entry.secondTotal += 1;\n      if (record.result === \"WIN\") entry.secondWins += 1;\n    }\n  }\n\n  return Array.from(byDeck.values())\n    .filter((stat) => stat.total > 0)\n    .sort((a, b) => b.total - a.total);\n};\n\nexport default function MatchRecordManager({ decks, records }: Props) {\n  const router = useRouter();\n  const [isPending, startTransition] = useTransition();\n  const [deckId, setDeckId] = useState(\"\");\n  const [opponentDeckId, setOpponentDeckId] = useState(\"\");\n  const [turn, setTurn] = useState<MatchRecord[\"turn\"]>(\"FIRST\");\n  const [result, setResult] = useState<MatchRecord[\"result\"]>(\"WIN\");\n  const [note, setNote] = useState(\"\");\n  const [editingId, setEditingId] = useState<number | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState<\"overall\" | number>(\"overall\");\n\n  const users = useMemo(() => {\n    const seen = new Map<number, string>();\n    for (const record of records) {\n      if (!seen.has(record.user.id)) {\n        seen.set(record.user.id, record.user.name);\n      }\n    }\n    return Array.from(seen.entries()).map(([id, name]) => ({ id, name }));\n  }, [records]);\n\n  const selectedDeck = useMemo(\n    () => decks.find((deck) => deck.id === Number(deckId)),\n    [deckId, decks]\n  );\n\n  const opponentOptions = useMemo(() => {\n    if (!selectedDeck) return decks;\n    return decks.filter((deck) => deck.cardPack.id === selectedDeck.cardPack.id);\n  }, [decks, selectedDeck]);\n\n  const deckOptions = useMemo(\n    () =>\n      decks.map((deck) => ({\n        id: deck.id,\n        label: `${deck.name} (${deckClassLabels[deck.deckClass] ?? deck.deckClass})`,\n        cardPack: deck.cardPack.name,\n        cardPackId: deck.cardPack.id,\n      })),\n    [decks]\n  );\n\n  const activeRecords = useMemo(() => {\n    if (activeTab === \"overall\") return records;\n    return records.filter((record) => record.user.id === activeTab);\n  }, [activeTab, records]);\n\n  const summary = useMemo(() => {\n    const total = activeRecords.length;\n    const wins = activeRecords.filter((record) => record.result === \"WIN\").length;\n    const firstTotal = activeRecords.filter(\n      (record) => record.turn === \"FIRST\"\n    ).length;\n    const firstWins = activeRecords.filter(\n      (record) => record.turn === \"FIRST\" && record.result === \"WIN\"\n    ).length;\n    const secondTotal = activeRecords.filter(\n      (record) => record.turn === \"SECOND\"\n    ).length;\n    const secondWins = activeRecords.filter(\n      (record) => record.turn === \"SECOND\" && record.result === \"WIN\"\n    ).length;\n    return {\n      total,\n      wins,\n      rate: total ? (wins / total) * 100 : null,\n      firstRate: firstTotal ? (firstWins / firstTotal) * 100 : null,\n      secondRate: secondTotal ? (secondWins / secondTotal) * 100 : null,\n      firstTotal,\n      secondTotal,\n    };\n  }, [activeRecords]);\n\n  const deckStats = useMemo(\n    () => buildDeckStats(decks, activeRecords),\n    [decks, activeRecords]\n  );\n\n  const onSubmit = async (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n    setError(null);\n\n    if (!deckId || !opponentDeckId) {\n      setError(\"デッキを選択してください。\");\n      return;\n    }\n\n    const payload = {\n      deckId: Number(deckId),\n      opponentDeckId: Number(opponentDeckId),\n      turn,\n      result,\n      note,\n    };\n\n    const targetUrl = editingId\n      ? `/api/match-records/${editingId}`\n      : \"/api/match-records\";\n    const method = editingId ? \"PUT\" : \"POST\";\n\n    const res = await fetch(targetUrl, {\n      method,\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(payload),\n    });\n\n    if (!res.ok) {\n      const data = await res.json().catch(() => ({}));\n      setError(data?.error ?? \"登録に失敗しました。\");\n      return;\n    }\n\n    setDeckId(\"\");\n    setOpponentDeckId(\"\");\n    setTurn(\"FIRST\");\n    setResult(\"WIN\");\n    setNote(\"\");\n    setEditingId(null);\n    startTransition(() => router.refresh());\n  };\n\n  const onEdit = (record: MatchRecord) => {\n    setDeckId(String(record.deck.id));\n    setOpponentDeckId(String(record.opponentDeck.id));\n    setTurn(record.turn);\n    setResult(record.result);\n    setNote(record.note ?? \"\");\n    setEditingId(record.id);\n  };\n\n  const onCancelEdit = () => {\n    setDeckId(\"\");\n    setOpponentDeckId(\"\");\n    setTurn(\"FIRST\");\n    setResult(\"WIN\");\n    setNote(\"\");\n    setEditingId(null);\n    setError(null);\n  };\n\n  const onDelete = async (id: number) => {\n    setError(null);\n    const res = await fetch(`/api/match-records/${id}`, {\n      method: \"DELETE\",\n    });\n\n    if (!res.ok) {\n      const data = await res.json().catch(() => ({}));\n      setError(data?.error ?? \"削除に失敗しました。\");\n      return;\n    }\n\n    startTransition(() => router.refresh());\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      <section className=\"rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm\">\n        <div>\n          <p className=\"text-xs font-semibold uppercase tracking-[0.3em] text-zinc-400\">\n            Records\n          </p>\n          <h2 className=\"mt-2 text-2xl font-semibold text-zinc-900\">\n            {editingId ? \"戦績の編集\" : \"戦績の登録\"}\n          </h2>\n        </div>\n\n        <form className=\"mt-6 grid gap-4 md:grid-cols-4\" onSubmit={onSubmit}>\n          <label className=\"flex flex-col gap-2 text-sm text-zinc-700 md:col-span-2\">\n            自分のデッキ\n            <select\n              className=\"rounded-lg border border-zinc-200 px-3 py-2 text-sm text-zinc-900 focus:border-zinc-400 focus:outline-none\"\n              value={deckId}\n              onChange={(event) => {\n                setDeckId(event.target.value);\n                setOpponentDeckId(\"\");\n              }}\n            >\n              <option value=\"\">選択してください</option>\n              {deckOptions.map((deck) => (\n                <option key={deck.id} value={deck.id}>\n                  {deck.label} / {deck.cardPack}\n                </option>\n              ))}\n            </select>\n          </label>\n          <label className=\"flex flex-col gap-2 text-sm text-zinc-700 md:col-span-2\">\n            対戦デッキ\n            <select\n              className=\"rounded-lg border border-zinc-200 px-3 py-2 text-sm text-zinc-900 focus:border-zinc-400 focus:outline-none\"\n              value={opponentDeckId}\n              onChange={(event) => setOpponentDeckId(event.target.value)}\n            >\n              <option value=\"\">選択してください</option>\n              {opponentOptions.map((deck) => (\n                <option key={deck.id} value={deck.id}>\n                  {deck.name} / {deck.cardPack.name}\n                </option>\n              ))}\n            </select>\n          </label>\n          <label className=\"flex flex-col gap-2 text-sm text-zinc-700\">\n            先攻/後攻\n            <select\n              className=\"rounded-lg border border-zinc-200 px-3 py-2 text-sm text-zinc-900 focus:border-zinc-400 focus:outline-none\"\n              value={turn}\n              onChange={(event) =>\n                setTurn(event.target.value as MatchRecord[\"turn\"])\n              }\n            >\n              <option value=\"FIRST\">先攻</option>\n              <option value=\"SECOND\">後攻</option>\n            </select>\n          </label>\n          <label className=\"flex flex-col gap-2 text-sm text-zinc-700\">\n            勝敗\n            <select\n              className=\"rounded-lg border border-zinc-200 px-3 py-2 text-sm text-zinc-900 focus:border-zinc-400 focus:outline-none\"\n              value={result}\n              onChange={(event) =>\n                setResult(event.target.value as MatchRecord[\"result\"])\n              }\n            >\n              <option value=\"WIN\">勝ち</option>\n              <option value=\"LOSS\">負け</option>\n            </select>\n          </label>\n          <label className=\"flex flex-col gap-2 text-sm text-zinc-700 md:col-span-4\">\n            備考\n            <textarea\n              className=\"min-h-[110px] rounded-lg border border-zinc-200 px-3 py-2 text-sm text-zinc-900 focus:border-zinc-400 focus:outline-none\"\n              value={note}\n              onChange={(event) => setNote(event.target.value)}\n              placeholder=\"任意でメモを入力してください\"\n            />\n          </label>\n          <div className=\"flex flex-col gap-3 md:col-span-4 md:flex-row md:items-end md:justify-start\">\n            <button\n              className=\"w-full rounded-lg bg-zinc-900 px-4 py-2 text-sm font-semibold text-white hover:bg-zinc-800 disabled:cursor-not-allowed disabled:bg-zinc-400 md:w-auto md:min-w-[160px]\"\n              type=\"submit\"\n              disabled={isPending}\n            >\n              {editingId ? \"更新する\" : \"登録する\"}\n            </button>\n            {editingId && (\n              <button\n                className=\"w-full rounded-lg border border-zinc-200 px-4 py-2 text-sm font-semibold text-zinc-700 hover:bg-zinc-100 md:w-auto md:min-w-[160px]\"\n                type=\"button\"\n                onClick={onCancelEdit}\n              >\n                編集をやめる\n              </button>\n            )}\n          </div>\n        </form>\n        {error && <p className=\"mt-3 text-sm text-red-600\">{error}</p>}\n      </section>\n\n      <section className=\"rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm\">\n        <div>\n          <p className=\"text-xs font-semibold uppercase tracking-[0.3em] text-zinc-400\">\n            Summary\n          </p>\n          <h3 className=\"mt-2 text-lg font-semibold text-zinc-900\">\n            勝率サマリー\n          </h3>\n        </div>\n\n        <div className=\"mt-4 flex flex-wrap gap-2\">\n          <button\n            type=\"button\"\n            className={`rounded-full border px-4 py-2 text-xs font-semibold transition ${\n              activeTab === \"overall\"\n                ? \"border-zinc-900 bg-zinc-900 text-white\"\n                : \"border-zinc-200 text-zinc-600 hover:bg-zinc-100\"\n            }`}\n            onClick={() => setActiveTab(\"overall\")}\n          >\n            全体\n          </button>\n          {users.map((user) => (\n            <button\n              key={user.id}\n              type=\"button\"\n              className={`rounded-full border px-4 py-2 text-xs font-semibold transition ${\n                activeTab === user.id\n                  ? \"border-zinc-900 bg-zinc-900 text-white\"\n                  : \"border-zinc-200 text-zinc-600 hover:bg-zinc-100\"\n              }`}\n              onClick={() => setActiveTab(user.id)}\n            >\n              {user.name}\n            </button>\n          ))}\n        </div>\n\n        <div className=\"mt-6 grid gap-4 md:grid-cols-3\">\n          <div className=\"rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-4\">\n            <p className=\"text-xs text-zinc-500\">全体勝率</p>\n            <p className=\"mt-2 text-2xl font-semibold text-zinc-900\">\n              {formatRate(summary.rate)}\n              <span className=\"ml-2 text-sm text-zinc-500\">\n                {summary.wins}/{summary.total}\n              </span>\n            </p>\n          </div>\n          <div className=\"rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-4\">\n            <p className=\"text-xs text-zinc-500\">先攻勝率</p>\n            <p className=\"mt-2 text-2xl font-semibold text-zinc-900\">\n              {formatRate(summary.firstRate)}\n              <span className=\"ml-2 text-sm text-zinc-500\">\n                {summary.firstTotal}\n              </span>\n            </p>\n          </div>\n          <div className=\"rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-4\">\n            <p className=\"text-xs text-zinc-500\">後攻勝率</p>\n            <p className=\"mt-2 text-2xl font-semibold text-zinc-900\">\n              {formatRate(summary.secondRate)}\n              <span className=\"ml-2 text-sm text-zinc-500\">\n                {summary.secondTotal}\n              </span>\n            </p>\n          </div>\n        </div>\n\n        <div className=\"mt-6 overflow-x-auto\">\n          <table className=\"min-w-full text-left text-sm text-zinc-700\">\n            <thead className=\"border-b border-zinc-200 bg-zinc-50 text-xs uppercase tracking-wider text-zinc-400\">\n              <tr>\n                <th className=\"px-3 py-2\">デッキ</th>\n                <th className=\"px-3 py-2 text-center\">全体勝率</th>\n                <th className=\"px-3 py-2 text-center\">先攻勝率</th>\n                <th className=\"px-3 py-2 text-center\">後攻勝率</th>\n                <th className=\"px-3 py-2 text-center\">試合数</th>\n              </tr>\n            </thead>\n            <tbody>\n              {deckStats.map((stat) => (\n                <tr key={stat.deckId} className=\"border-b border-zinc-100\">\n                  <td className=\"px-3 py-3 font-semibold text-zinc-900\">\n                    {stat.name}\n                    <div className=\"text-xs font-normal text-zinc-500\">\n                      {deckClassLabels[stat.deckClass] ?? stat.deckClass}\n                      {\" / \"}\n                      {stat.cardPack}\n                    </div>\n                  </td>\n                  <td className=\"px-3 py-3 text-center font-semibold text-zinc-900\">\n                    {formatRate(stat.total ? (stat.wins / stat.total) * 100 : null)}\n                  </td>\n                  <td className=\"px-3 py-3 text-center\">\n                    {formatRate(\n                      stat.firstTotal\n                        ? (stat.firstWins / stat.firstTotal) * 100\n                        : null\n                    )}\n                  </td>\n                  <td className=\"px-3 py-3 text-center\">\n                    {formatRate(\n                      stat.secondTotal\n                        ? (stat.secondWins / stat.secondTotal) * 100\n                        : null\n                    )}\n                  </td>\n                  <td className=\"px-3 py-3 text-center\">{stat.total}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n          {deckStats.length === 0 && (\n            <p className=\"mt-4 text-sm text-zinc-500\">\n              戦績が登録されていません。\n            </p>\n          )}\n        </div>\n      </section>\n\n      <section className=\"rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm\">\n        <div className=\"flex items-center justify-between\">\n          <h3 className=\"text-lg font-semibold text-zinc-900\">戦績一覧</h3>\n          <span className=\"text-sm text-zinc-500\">{records.length}件</span>\n        </div>\n        <div className=\"mt-4 space-y-3\">\n          {records.length === 0 && (\n            <p className=\"text-sm text-zinc-500\">まだ登録がありません。</p>\n          )}\n          {records.map((record) => (\n            <div\n              key={record.id}\n              className=\"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-zinc-100 bg-zinc-50 px-4 py-3\"\n            >\n              <div className=\"min-w-0\">\n                <p className=\"text-sm font-semibold text-zinc-900\">\n                  {record.deck.name} vs {record.opponentDeck.name}\n                </p>\n                <p className=\"text-xs text-zinc-500\">\n                  登録: {record.user.name} ・{turnLabels[record.turn]} ・\n                  {resultLabels[record.result]}\n                </p>\n                {record.note && (\n                  <p className=\"mt-2 text-xs text-zinc-600\">{record.note}</p>\n                )}\n              </div>\n              <div className=\"flex items-center gap-4\">\n                <span\n                  className={`rounded-full px-3 py-1 text-xs font-semibold ${\n                    record.result === \"WIN\"\n                      ? \"bg-emerald-500 text-white\"\n                      : \"bg-rose-500 text-white\"\n                  }`}\n                >\n                  {resultLabels[record.result]}\n                </span>\n                <button\n                  className=\"text-sm font-semibold text-zinc-700 hover:text-zinc-900\"\n                  onClick={() => onEdit(record)}\n                  type=\"button\"\n                >\n                  編集\n                </button>\n                <button\n                  className=\"text-sm font-semibold text-red-600 hover:text-red-700\"\n                  onClick={() => onDelete(record.id)}\n                  type=\"button\"\n                >\n                  削除\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}